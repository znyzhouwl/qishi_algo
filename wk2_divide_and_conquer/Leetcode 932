class Solution:
    def beautifulArray(self, n: int) -> List[int]:
        memo = {1: [1]}
        def helper(x: int) -> List[int]:
            if x not in memo:
                odds = helper((x+1) // 2)
                even = helper(x // 2)
                memo[x] = [2*u - 1 for u in odds] + [2*u for u in even]
            return memo[x]
        return helper(n)
